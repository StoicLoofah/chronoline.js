<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
		<title>Click event test</title>
		<link rel="stylesheet" href="../node_modules/qunitjs/qunit/qunit.css"/>
		<link rel="stylesheet" href="../chronoline/chronoline.css"/>
	  
	    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
	    <script src="../node_modules/raphael/raphael.min.js"></script>
	    <script src="../node_modules/qunitjs/qunit/qunit.js"></script>
        <script src="../node_modules/qtip2/jquery.qtip.min.js"></script>
	    <script src="../chronoline/chronoline.js"></script>
  <script>
  
  
      
var oneEvent = [
    { dates: [new Date(2011, 2, 31)], title: "2011 Season Opener", section: 0 }];
var oneSection = [
    { dates: [new Date(2011, 2, 31), new Date(2011, 9, 28)], title: "2011 MLB Season", section: 0, attrs: { fill: "#d4e3fd" } }];

var events = [
    {dates: [new Date(2011, 2, 31)], title: "2011 Season Opener", section: 0},
    {dates: [new Date(2012, 1, 29)], title: "Spring Training Begins", section: 2},
    {dates: [new Date(2012, 3, 5)], title: "Atlanta Braves @ New York Mets Game 1", section: 1},
    {dates: [new Date(2012, 3, 7)], title: "Atlanta Braves @ New York Mets Game 2", section: 1},
    {dates: [new Date(2012, 3, 8)], title: "Atlanta Braves @ New York Mets Game 3", section: 1},
    {dates: [new Date(2012, 3, 9), new Date(2012, 3, 11)], title: "Atlanta Braves @ Houston Astros", section: 1},
    {dates: [new Date(2012, 3, 13), new Date(2012, 3, 15)], title: "Milwaukee Brewers @ Atlanta Braves", section: 1},
    {dates: [new Date(2012, 3, 9), new Date(2012, 3, 11)], title: "Boston Red Sox @ Toronto Blue Jays", section: 1},
    {dates: [new Date(2012, 3, 13), new Date(2012, 3, 15)], title: "Baltimore Orioles @ Toronto Blue Jays", section: 1},
    {dates: [new Date(2012, 3, 17), new Date(2012, 3, 19)], title: "Tampa Bay Rays @ Toronto Blue Jays", section: 1},
    {dates: [new Date(2012, 3, 20), new Date(2012, 3, 23)], title: "Toronto Blue Jays @ Kansas City Royals", section: 1},
    {dates: [new Date(2012, 3, 5)], title: "Opening Day for 12 Teams", section: 1},
    {dates: [new Date(2012, 2, 28)], title: "Seattle Mariners v. Oakland A's", section: 1, description: "Played in Japan!"},
    {dates: [new Date(2012, 4, 18), new Date(2012, 5, 24)], title: "Interleague Play", section: 1},
    {dates: [new Date(2012, 5, 10)], title: "All-Star Game", section: 1},
    {dates: [new Date(2012, 9, 24)], title: "World Series Begins", section: 3}
    ];

var sections = [
    {dates: [new Date(2011, 2, 31), new Date(2011, 9, 28)], title: "2011 MLB Season", section: 0, attrs: {fill: "#d4e3fd"}},
    {dates: [new Date(2012, 2, 28), new Date(2012, 9, 3)], title: "2012 MLB Regular Season", section: 1, attrs: {fill: "#d4e3fd"}},
    {dates: [new Date(2012, 1, 29), new Date(2012, 3, 4)], title: "Spring Training", section: 2, attrs: {fill: "#eaf0fa"}},
    {dates: [new Date(2012, 9, 5), new Date(2012, 9, 31)], title: "2012 MLB Playoffs", section: 3, attrs: {fill: "#eaf0fa"}}
];
var dateInsideSections = [
    new Date(2011, 4, 2), // date inside first section
    new Date(2012, 3, 1),//inside section[2]
    new Date(2012, 8, 1),//inside section[1]
    
    new Date(2012, 9, 31)];//inside section[3]

var overlapSections = [
    { dates: [new Date(2012, 2, 28), new Date(2012, 9, 3)], title: "2012 MLB Regular Season", section: 1, attrs: { fill: "#d4e3fd" } },
    { dates: [new Date(2012, 1, 29), new Date(2012, 3, 4)], title: "Spring Training", section: 2, attrs: { fill: "#eaf0fa" } },
];
var sectionOverlapDate = new Date(2012, 3, 1);// inside overlap 

var back0 = new Date(2011, 2, 23);
$(document).ready(function(){
    //initilize timeline
    var tlContinousOff = new Chronoline(document.getElementById('target1'), events,
        {
            continuousScroll: false,
            defaultStartDate: new Date(2011, 2, 20),
            sections: sections,
            visibleSpan: 31556900000,  // 1 year
            timelinePadding: 864000000, //10 days
            fitVisibleSpan: false,
            subLabel: 'month',
            subSubLabel: 'year', 
            scrollable: true,
        });

    test('continuousScroll false, scroll back in time on left click' , 1, function (assert) {
        var dtBefore = new Date(tlContinousOff.pxToMs(-getLeft(tlContinousOff.paperElem)));
        $('#target1').find('.chronoline-left').click();//click left
        var dtAfter =  new Date(tlContinousOff.pxToMs(-getLeft(tlContinousOff.paperElem)));
        assert.ok(dtBefore > dtAfter,"Current date moved backwards on left click");
    });
    test('continuousScroll false, scroll forward in time on right click' , 1, function (assert) {
        var dtBefore = new Date(tlContinousOff.pxToMs(-getLeft(tlContinousOff.paperElem)));
        $('#target1').find('.chronoline-right').click();//click left
        var dtAfter =  new Date(tlContinousOff.pxToMs(-getLeft(tlContinousOff.paperElem)));
        assert.ok(dtBefore < dtAfter,"Current date moved forward on right click");
    });
    
});
//dispach mouse event
// supports multiple browsers
function dispatchEvent(el, evt) {
    if (el.dispatchEvent) {
        el.dispatchEvent(evt);
    } else if (el.fireEvent) {
        el.fireEvent('on' + type, evt);
    }
    return evt;
}
  </script>
</head>
<body>
    <div id="qunit"></div>
    <div id="target1"></div> 
    <div>Continous scroll off</div>
</body>
</html>